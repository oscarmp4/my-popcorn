

	var NA = require("nodealytics");

	module.exports = {
		enable: function (code, domain) {

			NA.initialize(code, domain, function () {
				// More ga code
			});


			return function (req, res, next) {
				req.trackPage = function (title, cb) {
					cb = cb || function () {};
					NA.trackPage(title, req.url, cb);
				};

				req.trackEvent = function (name, value, cb) {
					cb = cb || function () {};
					NA.trackEvent(name, value, cb);
				};

				next();
			}
		}
	}